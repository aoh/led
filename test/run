#!/bin/bash

for res in *.out
do
	rm "$res"
done

echo "Running tests"
for foo in *.io
do
	echo " - $foo"
	cat "$foo" | "$@" > /dev/null 2>&1
	cmp "$foo.out" "$foo.ok" || { echo "Test $foo failed: $(diff $foo.ok $foo.out)"; exit 1; }
done

echo "Tests OK"
